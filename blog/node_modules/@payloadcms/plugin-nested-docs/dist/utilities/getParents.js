"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const getParents = async (req, pluginConfig, collection, doc, docs = [])=>{
    const parentSlug = pluginConfig?.parentFieldSlug || 'parent';
    const parent = doc[parentSlug];
    let retrievedParent;
    if (parent) {
        // If not auto-populated, and we have an ID
        if (typeof parent === 'string' || typeof parent === 'number') {
            retrievedParent = await req.payload.findByID({
                id: parent,
                collection: collection.slug,
                depth: 0,
                disableErrors: true,
                req
            });
        }
        // If auto-populated
        if (typeof parent === 'object') {
            retrievedParent = parent;
        }
        if (retrievedParent) {
            if (retrievedParent[parentSlug]) {
                return getParents(req, pluginConfig, collection, retrievedParent, [
                    retrievedParent,
                    ...docs
                ]);
            }
            return [
                retrievedParent,
                ...docs
            ];
        }
    }
    return docs;
};
const _default = getParents;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvZ2V0UGFyZW50cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENvbGxlY3Rpb25Db25maWcgfSBmcm9tICdwYXlsb2FkL3R5cGVzJ1xuXG5pbXBvcnQgdHlwZSB7IFBsdWdpbkNvbmZpZyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5jb25zdCBnZXRQYXJlbnRzID0gYXN5bmMgKFxuICByZXE6IGFueSxcbiAgcGx1Z2luQ29uZmlnOiBQbHVnaW5Db25maWcsXG4gIGNvbGxlY3Rpb246IENvbGxlY3Rpb25Db25maWcsXG4gIGRvYzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGRvY3M6IEFycmF5PFJlY29yZDxzdHJpbmcsIHVua25vd24+PiA9IFtdLFxuKTogUHJvbWlzZTxBcnJheTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4+ID0+IHtcbiAgY29uc3QgcGFyZW50U2x1ZyA9IHBsdWdpbkNvbmZpZz8ucGFyZW50RmllbGRTbHVnIHx8ICdwYXJlbnQnXG4gIGNvbnN0IHBhcmVudCA9IGRvY1twYXJlbnRTbHVnXVxuICBsZXQgcmV0cmlldmVkUGFyZW50XG5cbiAgaWYgKHBhcmVudCkge1xuICAgIC8vIElmIG5vdCBhdXRvLXBvcHVsYXRlZCwgYW5kIHdlIGhhdmUgYW4gSURcbiAgICBpZiAodHlwZW9mIHBhcmVudCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHBhcmVudCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHJpZXZlZFBhcmVudCA9IGF3YWl0IHJlcS5wYXlsb2FkLmZpbmRCeUlEKHtcbiAgICAgICAgaWQ6IHBhcmVudCxcbiAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbi5zbHVnLFxuICAgICAgICBkZXB0aDogMCxcbiAgICAgICAgZGlzYWJsZUVycm9yczogdHJ1ZSxcbiAgICAgICAgcmVxLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBJZiBhdXRvLXBvcHVsYXRlZFxuICAgIGlmICh0eXBlb2YgcGFyZW50ID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0cmlldmVkUGFyZW50ID0gcGFyZW50XG4gICAgfVxuXG4gICAgaWYgKHJldHJpZXZlZFBhcmVudCkge1xuICAgICAgaWYgKHJldHJpZXZlZFBhcmVudFtwYXJlbnRTbHVnXSkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyZW50cyhyZXEsIHBsdWdpbkNvbmZpZywgY29sbGVjdGlvbiwgcmV0cmlldmVkUGFyZW50LCBbXG4gICAgICAgICAgcmV0cmlldmVkUGFyZW50LFxuICAgICAgICAgIC4uLmRvY3MsXG4gICAgICAgIF0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbcmV0cmlldmVkUGFyZW50LCAuLi5kb2NzXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkb2NzXG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldFBhcmVudHNcbiJdLCJuYW1lcyI6WyJnZXRQYXJlbnRzIiwicmVxIiwicGx1Z2luQ29uZmlnIiwiY29sbGVjdGlvbiIsImRvYyIsImRvY3MiLCJwYXJlbnRTbHVnIiwicGFyZW50RmllbGRTbHVnIiwicGFyZW50IiwicmV0cmlldmVkUGFyZW50IiwicGF5bG9hZCIsImZpbmRCeUlEIiwiaWQiLCJzbHVnIiwiZGVwdGgiLCJkaXNhYmxlRXJyb3JzIl0sIm1hcHBpbmdzIjoiOzs7OytCQStDQTs7O2VBQUE7OztBQTNDQSxNQUFNQSxhQUFhLE9BQ2pCQyxLQUNBQyxjQUNBQyxZQUNBQyxLQUNBQyxPQUF1QyxFQUFFO0lBRXpDLE1BQU1DLGFBQWFKLGNBQWNLLG1CQUFtQjtJQUNwRCxNQUFNQyxTQUFTSixHQUFHLENBQUNFLFdBQVc7SUFDOUIsSUFBSUc7SUFFSixJQUFJRCxRQUFRO1FBQ1YsMkNBQTJDO1FBQzNDLElBQUksT0FBT0EsV0FBVyxZQUFZLE9BQU9BLFdBQVcsVUFBVTtZQUM1REMsa0JBQWtCLE1BQU1SLElBQUlTLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDO2dCQUMzQ0MsSUFBSUo7Z0JBQ0pMLFlBQVlBLFdBQVdVLElBQUk7Z0JBQzNCQyxPQUFPO2dCQUNQQyxlQUFlO2dCQUNmZDtZQUNGO1FBQ0Y7UUFFQSxvQkFBb0I7UUFDcEIsSUFBSSxPQUFPTyxXQUFXLFVBQVU7WUFDOUJDLGtCQUFrQkQ7UUFDcEI7UUFFQSxJQUFJQyxpQkFBaUI7WUFDbkIsSUFBSUEsZUFBZSxDQUFDSCxXQUFXLEVBQUU7Z0JBQy9CLE9BQU9OLFdBQVdDLEtBQUtDLGNBQWNDLFlBQVlNLGlCQUFpQjtvQkFDaEVBO3VCQUNHSjtpQkFDSjtZQUNIO1lBRUEsT0FBTztnQkFBQ0k7bUJBQW9CSjthQUFLO1FBQ25DO0lBQ0Y7SUFFQSxPQUFPQTtBQUNUO01BRUEsV0FBZUwifQ==