"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _httpstatus = /*#__PURE__*/ _interop_require_default(require("http-status"));
const _errors = require("payload/errors");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const handleError = (error, req)=>{
    // Handle uniqueness error from MongoDB
    if (error.code === 11000 && error.keyValue) {
        throw new _errors.ValidationError([
            {
                field: Object.keys(error.keyValue)[0],
                message: req.t('error:valueMustBeUnique')
            }
        ], req.t);
    } else if (error.code === 11000) {
        throw new _errors.APIError(req.t('error:valueMustBeUnique'), _httpstatus.default.BAD_REQUEST);
    } else {
        throw error;
    }
};
const _default = handleError;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvaGFuZGxlRXJyb3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGh0dHBTdGF0dXMgZnJvbSAnaHR0cC1zdGF0dXMnXG5pbXBvcnQgeyBBUElFcnJvciwgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAncGF5bG9hZC9lcnJvcnMnXG5cbmNvbnN0IGhhbmRsZUVycm9yID0gKGVycm9yLCByZXEpID0+IHtcbiAgLy8gSGFuZGxlIHVuaXF1ZW5lc3MgZXJyb3IgZnJvbSBNb25nb0RCXG4gIGlmIChlcnJvci5jb2RlID09PSAxMTAwMCAmJiBlcnJvci5rZXlWYWx1ZSkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXG4gICAgICBbXG4gICAgICAgIHtcbiAgICAgICAgICBmaWVsZDogT2JqZWN0LmtleXMoZXJyb3Iua2V5VmFsdWUpWzBdLFxuICAgICAgICAgIG1lc3NhZ2U6IHJlcS50KCdlcnJvcjp2YWx1ZU11c3RCZVVuaXF1ZScpLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHJlcS50LFxuICAgIClcbiAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAxMTAwMCkge1xuICAgIHRocm93IG5ldyBBUElFcnJvcihyZXEudCgnZXJyb3I6dmFsdWVNdXN0QmVVbmlxdWUnKSwgaHR0cFN0YXR1cy5CQURfUkVRVUVTVClcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGhhbmRsZUVycm9yXG4iXSwibmFtZXMiOlsiaGFuZGxlRXJyb3IiLCJlcnJvciIsInJlcSIsImNvZGUiLCJrZXlWYWx1ZSIsIlZhbGlkYXRpb25FcnJvciIsImZpZWxkIiwiT2JqZWN0Iiwia2V5cyIsIm1lc3NhZ2UiLCJ0IiwiQVBJRXJyb3IiLCJodHRwU3RhdHVzIiwiQkFEX1JFUVVFU1QiXSwibWFwcGluZ3MiOiI7Ozs7K0JBc0JBOzs7ZUFBQTs7O21FQXRCdUI7d0JBQ21COzs7Ozs7QUFFMUMsTUFBTUEsY0FBYyxDQUFDQyxPQUFPQztJQUMxQix1Q0FBdUM7SUFDdkMsSUFBSUQsTUFBTUUsSUFBSSxLQUFLLFNBQVNGLE1BQU1HLFFBQVEsRUFBRTtRQUMxQyxNQUFNLElBQUlDLHVCQUFlLENBQ3ZCO1lBQ0U7Z0JBQ0VDLE9BQU9DLE9BQU9DLElBQUksQ0FBQ1AsTUFBTUcsUUFBUSxDQUFDLENBQUMsRUFBRTtnQkFDckNLLFNBQVNQLElBQUlRLENBQUMsQ0FBQztZQUNqQjtTQUNELEVBQ0RSLElBQUlRLENBQUM7SUFFVCxPQUFPLElBQUlULE1BQU1FLElBQUksS0FBSyxPQUFPO1FBQy9CLE1BQU0sSUFBSVEsZ0JBQVEsQ0FBQ1QsSUFBSVEsQ0FBQyxDQUFDLDRCQUE0QkUsbUJBQVUsQ0FBQ0MsV0FBVztJQUM3RSxPQUFPO1FBQ0wsTUFBTVo7SUFDUjtBQUNGO01BRUEsV0FBZUQifQ==