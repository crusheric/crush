"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "sanitizeQueryValue", {
    enumerable: true,
    get: function() {
        return sanitizeQueryValue;
    }
});
const _mongoose = /*#__PURE__*/ _interop_require_default(require("mongoose"));
const _utilities = require("payload/utilities");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const sanitizeQueryValue = ({ field, hasCustomID, operator, path, val })=>{
    let formattedValue = val;
    let formattedOperator = operator;
    // Disregard invalid _ids
    if (path === '_id' && typeof val === 'string' && val.split(',').length === 1) {
        if (!hasCustomID) {
            const isValid = _mongoose.default.Types.ObjectId.isValid(val);
            if (!isValid) {
                return {
                    operator: formattedOperator,
                    val: undefined
                };
            }
        }
        if (field.type === 'number') {
            const parsedNumber = parseFloat(val);
            if (Number.isNaN(parsedNumber)) {
                return {
                    operator: formattedOperator,
                    val: undefined
                };
            }
        }
    }
    // Cast incoming values as proper searchable types
    if (field.type === 'checkbox' && typeof val === 'string') {
        if (val.toLowerCase() === 'true') formattedValue = true;
        if (val.toLowerCase() === 'false') formattedValue = false;
    }
    if ([
        'all',
        'in',
        'not_in'
    ].includes(operator) && typeof formattedValue === 'string') {
        formattedValue = (0, _utilities.createArrayFromCommaDelineated)(formattedValue);
        if (field.type === 'number') {
            formattedValue = formattedValue.map((arrayVal)=>parseFloat(arrayVal));
        }
    }
    if (field.type === 'number' && typeof formattedValue === 'string') {
        formattedValue = Number(val);
    }
    if (field.type === 'date' && typeof val === 'string') {
        formattedValue = new Date(val);
        if (Number.isNaN(Date.parse(formattedValue))) {
            return undefined;
        }
    }
    if ([
        'relationship',
        'upload'
    ].includes(field.type)) {
        if (val === 'null') {
            formattedValue = null;
        }
        // Object equality requires the value to be the first key in the object that is being queried.
        if (operator === 'equals' && typeof formattedValue === 'object' && formattedValue.value && formattedValue.relationTo) {
            return {
                rawQuery: {
                    $and: [
                        {
                            [`${path}.value`]: {
                                $eq: formattedValue.value
                            }
                        },
                        {
                            [`${path}.relationTo`]: {
                                $eq: formattedValue.relationTo
                            }
                        }
                    ]
                }
            };
        }
        if (operator === 'in' && Array.isArray(formattedValue)) {
            formattedValue = formattedValue.reduce((formattedValues, inVal)=>{
                const newValues = [
                    inVal
                ];
                if (_mongoose.default.Types.ObjectId.isValid(inVal)) newValues.push(new _mongoose.default.Types.ObjectId(inVal));
                const parsedNumber = parseFloat(inVal);
                if (!Number.isNaN(parsedNumber)) newValues.push(parsedNumber);
                return [
                    ...formattedValues,
                    ...newValues
                ];
            }, []);
        }
    }
    // Set up specific formatting necessary by operators
    if (operator === 'near') {
        let lng;
        let lat;
        let maxDistance;
        let minDistance;
        if (Array.isArray(formattedValue)) {
            [lng, lat, maxDistance, minDistance] = formattedValue;
        }
        if (typeof formattedValue === 'string') {
            [lng, lat, maxDistance, minDistance] = (0, _utilities.createArrayFromCommaDelineated)(formattedValue);
        }
        if (lng == null || lat == null || maxDistance == null && minDistance == null) {
            formattedValue = undefined;
        } else {
            formattedValue = {
                $geometry: {
                    type: 'Point',
                    coordinates: [
                        parseFloat(lng),
                        parseFloat(lat)
                    ]
                }
            };
            if (maxDistance) formattedValue.$maxDistance = parseFloat(maxDistance);
            if (minDistance) formattedValue.$minDistance = parseFloat(minDistance);
        }
    }
    if (operator === 'within' || operator === 'intersects') {
        formattedValue = {
            $geometry: formattedValue
        };
    }
    if (path !== '_id' || path === '_id' && hasCustomID && field.type === 'text') {
        if (operator === 'contains') {
            formattedValue = {
                $options: 'i',
                $regex: formattedValue
            };
        }
    }
    if ((path === '_id' || path === 'parent') && operator === 'like' && formattedValue.length === 24 && !hasCustomID) {
        formattedOperator = 'equals';
    }
    if (operator === 'exists') {
        formattedValue = formattedValue === 'true' || formattedValue === true;
    }
    return {
        operator: formattedOperator,
        val: formattedValue
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9xdWVyaWVzL3Nhbml0aXplUXVlcnlWYWx1ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEZpZWxkLCBUYWJBc0ZpZWxkIH0gZnJvbSAncGF5bG9hZC90eXBlcydcblxuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJ1xuaW1wb3J0IHsgY3JlYXRlQXJyYXlGcm9tQ29tbWFEZWxpbmVhdGVkIH0gZnJvbSAncGF5bG9hZC91dGlsaXRpZXMnXG5cbnR5cGUgU2FuaXRpemVRdWVyeVZhbHVlQXJncyA9IHtcbiAgZmllbGQ6IEZpZWxkIHwgVGFiQXNGaWVsZFxuICBoYXNDdXN0b21JRDogYm9vbGVhblxuICBvcGVyYXRvcjogc3RyaW5nXG4gIHBhdGg6IHN0cmluZ1xuICB2YWw6IGFueVxufVxuXG5leHBvcnQgY29uc3Qgc2FuaXRpemVRdWVyeVZhbHVlID0gKHtcbiAgZmllbGQsXG4gIGhhc0N1c3RvbUlELFxuICBvcGVyYXRvcixcbiAgcGF0aCxcbiAgdmFsLFxufTogU2FuaXRpemVRdWVyeVZhbHVlQXJncyk6IHtcbiAgb3BlcmF0b3I/OiBzdHJpbmdcbiAgcmF3UXVlcnk/OiB1bmtub3duXG4gIHZhbD86IHVua25vd25cbn0gPT4ge1xuICBsZXQgZm9ybWF0dGVkVmFsdWUgPSB2YWxcbiAgbGV0IGZvcm1hdHRlZE9wZXJhdG9yID0gb3BlcmF0b3JcblxuICAvLyBEaXNyZWdhcmQgaW52YWxpZCBfaWRzXG4gIGlmIChwYXRoID09PSAnX2lkJyAmJiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiB2YWwuc3BsaXQoJywnKS5sZW5ndGggPT09IDEpIHtcbiAgICBpZiAoIWhhc0N1c3RvbUlEKSB7XG4gICAgICBjb25zdCBpc1ZhbGlkID0gbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQuaXNWYWxpZCh2YWwpXG5cbiAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICByZXR1cm4geyBvcGVyYXRvcjogZm9ybWF0dGVkT3BlcmF0b3IsIHZhbDogdW5kZWZpbmVkIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZmllbGQudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIGNvbnN0IHBhcnNlZE51bWJlciA9IHBhcnNlRmxvYXQodmFsKVxuXG4gICAgICBpZiAoTnVtYmVyLmlzTmFOKHBhcnNlZE51bWJlcikpIHtcbiAgICAgICAgcmV0dXJuIHsgb3BlcmF0b3I6IGZvcm1hdHRlZE9wZXJhdG9yLCB2YWw6IHVuZGVmaW5lZCB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2FzdCBpbmNvbWluZyB2YWx1ZXMgYXMgcHJvcGVyIHNlYXJjaGFibGUgdHlwZXNcbiAgaWYgKGZpZWxkLnR5cGUgPT09ICdjaGVja2JveCcgJiYgdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodmFsLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJykgZm9ybWF0dGVkVmFsdWUgPSB0cnVlXG4gICAgaWYgKHZhbC50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnKSBmb3JtYXR0ZWRWYWx1ZSA9IGZhbHNlXG4gIH1cblxuICBpZiAoWydhbGwnLCAnaW4nLCAnbm90X2luJ10uaW5jbHVkZXMob3BlcmF0b3IpICYmIHR5cGVvZiBmb3JtYXR0ZWRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICBmb3JtYXR0ZWRWYWx1ZSA9IGNyZWF0ZUFycmF5RnJvbUNvbW1hRGVsaW5lYXRlZChmb3JtYXR0ZWRWYWx1ZSlcblxuICAgIGlmIChmaWVsZC50eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgZm9ybWF0dGVkVmFsdWUgPSBmb3JtYXR0ZWRWYWx1ZS5tYXAoKGFycmF5VmFsKSA9PiBwYXJzZUZsb2F0KGFycmF5VmFsKSlcbiAgICB9XG4gIH1cblxuICBpZiAoZmllbGQudHlwZSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGZvcm1hdHRlZFZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIGZvcm1hdHRlZFZhbHVlID0gTnVtYmVyKHZhbClcbiAgfVxuXG4gIGlmIChmaWVsZC50eXBlID09PSAnZGF0ZScgJiYgdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBmb3JtYXR0ZWRWYWx1ZSA9IG5ldyBEYXRlKHZhbClcbiAgICBpZiAoTnVtYmVyLmlzTmFOKERhdGUucGFyc2UoZm9ybWF0dGVkVmFsdWUpKSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIGlmIChbJ3JlbGF0aW9uc2hpcCcsICd1cGxvYWQnXS5pbmNsdWRlcyhmaWVsZC50eXBlKSkge1xuICAgIGlmICh2YWwgPT09ICdudWxsJykge1xuICAgICAgZm9ybWF0dGVkVmFsdWUgPSBudWxsXG4gICAgfVxuXG4gICAgLy8gT2JqZWN0IGVxdWFsaXR5IHJlcXVpcmVzIHRoZSB2YWx1ZSB0byBiZSB0aGUgZmlyc3Qga2V5IGluIHRoZSBvYmplY3QgdGhhdCBpcyBiZWluZyBxdWVyaWVkLlxuICAgIGlmIChcbiAgICAgIG9wZXJhdG9yID09PSAnZXF1YWxzJyAmJlxuICAgICAgdHlwZW9mIGZvcm1hdHRlZFZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgZm9ybWF0dGVkVmFsdWUudmFsdWUgJiZcbiAgICAgIGZvcm1hdHRlZFZhbHVlLnJlbGF0aW9uVG9cbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJhd1F1ZXJ5OiB7XG4gICAgICAgICAgJGFuZDogW1xuICAgICAgICAgICAgeyBbYCR7cGF0aH0udmFsdWVgXTogeyAkZXE6IGZvcm1hdHRlZFZhbHVlLnZhbHVlIH0gfSxcbiAgICAgICAgICAgIHsgW2Ake3BhdGh9LnJlbGF0aW9uVG9gXTogeyAkZXE6IGZvcm1hdHRlZFZhbHVlLnJlbGF0aW9uVG8gfSB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wZXJhdG9yID09PSAnaW4nICYmIEFycmF5LmlzQXJyYXkoZm9ybWF0dGVkVmFsdWUpKSB7XG4gICAgICBmb3JtYXR0ZWRWYWx1ZSA9IGZvcm1hdHRlZFZhbHVlLnJlZHVjZSgoZm9ybWF0dGVkVmFsdWVzLCBpblZhbCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdWYWx1ZXMgPSBbaW5WYWxdXG4gICAgICAgIGlmIChtb25nb29zZS5UeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGluVmFsKSlcbiAgICAgICAgICBuZXdWYWx1ZXMucHVzaChuZXcgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQoaW5WYWwpKVxuXG4gICAgICAgIGNvbnN0IHBhcnNlZE51bWJlciA9IHBhcnNlRmxvYXQoaW5WYWwpXG4gICAgICAgIGlmICghTnVtYmVyLmlzTmFOKHBhcnNlZE51bWJlcikpIG5ld1ZhbHVlcy5wdXNoKHBhcnNlZE51bWJlcilcblxuICAgICAgICByZXR1cm4gWy4uLmZvcm1hdHRlZFZhbHVlcywgLi4ubmV3VmFsdWVzXVxuICAgICAgfSwgW10pXG4gICAgfVxuICB9XG5cbiAgLy8gU2V0IHVwIHNwZWNpZmljIGZvcm1hdHRpbmcgbmVjZXNzYXJ5IGJ5IG9wZXJhdG9yc1xuXG4gIGlmIChvcGVyYXRvciA9PT0gJ25lYXInKSB7XG4gICAgbGV0IGxuZ1xuICAgIGxldCBsYXRcbiAgICBsZXQgbWF4RGlzdGFuY2VcbiAgICBsZXQgbWluRGlzdGFuY2VcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGZvcm1hdHRlZFZhbHVlKSkge1xuICAgICAgO1tsbmcsIGxhdCwgbWF4RGlzdGFuY2UsIG1pbkRpc3RhbmNlXSA9IGZvcm1hdHRlZFZhbHVlXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBmb3JtYXR0ZWRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIDtbbG5nLCBsYXQsIG1heERpc3RhbmNlLCBtaW5EaXN0YW5jZV0gPSBjcmVhdGVBcnJheUZyb21Db21tYURlbGluZWF0ZWQoZm9ybWF0dGVkVmFsdWUpXG4gICAgfVxuXG4gICAgaWYgKGxuZyA9PSBudWxsIHx8IGxhdCA9PSBudWxsIHx8IChtYXhEaXN0YW5jZSA9PSBudWxsICYmIG1pbkRpc3RhbmNlID09IG51bGwpKSB7XG4gICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHVuZGVmaW5lZFxuICAgIH0gZWxzZSB7XG4gICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHtcbiAgICAgICAgJGdlb21ldHJ5OiB7IHR5cGU6ICdQb2ludCcsIGNvb3JkaW5hdGVzOiBbcGFyc2VGbG9hdChsbmcpLCBwYXJzZUZsb2F0KGxhdCldIH0sXG4gICAgICB9XG5cbiAgICAgIGlmIChtYXhEaXN0YW5jZSkgZm9ybWF0dGVkVmFsdWUuJG1heERpc3RhbmNlID0gcGFyc2VGbG9hdChtYXhEaXN0YW5jZSlcbiAgICAgIGlmIChtaW5EaXN0YW5jZSkgZm9ybWF0dGVkVmFsdWUuJG1pbkRpc3RhbmNlID0gcGFyc2VGbG9hdChtaW5EaXN0YW5jZSlcbiAgICB9XG4gIH1cblxuICBpZiAob3BlcmF0b3IgPT09ICd3aXRoaW4nIHx8IG9wZXJhdG9yID09PSAnaW50ZXJzZWN0cycpIHtcbiAgICBmb3JtYXR0ZWRWYWx1ZSA9IHtcbiAgICAgICRnZW9tZXRyeTogZm9ybWF0dGVkVmFsdWUsXG4gICAgfVxuICB9XG5cbiAgaWYgKHBhdGggIT09ICdfaWQnIHx8IChwYXRoID09PSAnX2lkJyAmJiBoYXNDdXN0b21JRCAmJiBmaWVsZC50eXBlID09PSAndGV4dCcpKSB7XG4gICAgaWYgKG9wZXJhdG9yID09PSAnY29udGFpbnMnKSB7XG4gICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHsgJG9wdGlvbnM6ICdpJywgJHJlZ2V4OiBmb3JtYXR0ZWRWYWx1ZSB9XG4gICAgfVxuICB9XG5cbiAgaWYgKFxuICAgIChwYXRoID09PSAnX2lkJyB8fCBwYXRoID09PSAncGFyZW50JykgJiZcbiAgICBvcGVyYXRvciA9PT0gJ2xpa2UnICYmXG4gICAgZm9ybWF0dGVkVmFsdWUubGVuZ3RoID09PSAyNCAmJlxuICAgICFoYXNDdXN0b21JRFxuICApIHtcbiAgICBmb3JtYXR0ZWRPcGVyYXRvciA9ICdlcXVhbHMnXG4gIH1cblxuICBpZiAob3BlcmF0b3IgPT09ICdleGlzdHMnKSB7XG4gICAgZm9ybWF0dGVkVmFsdWUgPSBmb3JtYXR0ZWRWYWx1ZSA9PT0gJ3RydWUnIHx8IGZvcm1hdHRlZFZhbHVlID09PSB0cnVlXG4gIH1cblxuICByZXR1cm4geyBvcGVyYXRvcjogZm9ybWF0dGVkT3BlcmF0b3IsIHZhbDogZm9ybWF0dGVkVmFsdWUgfVxufVxuIl0sIm5hbWVzIjpbInNhbml0aXplUXVlcnlWYWx1ZSIsImZpZWxkIiwiaGFzQ3VzdG9tSUQiLCJvcGVyYXRvciIsInBhdGgiLCJ2YWwiLCJmb3JtYXR0ZWRWYWx1ZSIsImZvcm1hdHRlZE9wZXJhdG9yIiwic3BsaXQiLCJsZW5ndGgiLCJpc1ZhbGlkIiwibW9uZ29vc2UiLCJUeXBlcyIsIk9iamVjdElkIiwidW5kZWZpbmVkIiwidHlwZSIsInBhcnNlZE51bWJlciIsInBhcnNlRmxvYXQiLCJOdW1iZXIiLCJpc05hTiIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJjcmVhdGVBcnJheUZyb21Db21tYURlbGluZWF0ZWQiLCJtYXAiLCJhcnJheVZhbCIsIkRhdGUiLCJwYXJzZSIsInZhbHVlIiwicmVsYXRpb25UbyIsInJhd1F1ZXJ5IiwiJGFuZCIsIiRlcSIsIkFycmF5IiwiaXNBcnJheSIsInJlZHVjZSIsImZvcm1hdHRlZFZhbHVlcyIsImluVmFsIiwibmV3VmFsdWVzIiwicHVzaCIsImxuZyIsImxhdCIsIm1heERpc3RhbmNlIiwibWluRGlzdGFuY2UiLCIkZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsIiRtYXhEaXN0YW5jZSIsIiRtaW5EaXN0YW5jZSIsIiRvcHRpb25zIiwiJHJlZ2V4Il0sIm1hcHBpbmdzIjoiOzs7OytCQWFhQTs7O2VBQUFBOzs7aUVBWFE7MkJBQzBCOzs7Ozs7QUFVeEMsTUFBTUEscUJBQXFCLENBQUMsRUFDakNDLEtBQUssRUFDTEMsV0FBVyxFQUNYQyxRQUFRLEVBQ1JDLElBQUksRUFDSkMsR0FBRyxFQUNvQjtJQUt2QixJQUFJQyxpQkFBaUJEO0lBQ3JCLElBQUlFLG9CQUFv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